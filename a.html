<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .range-input {
            -webkit-appearance: none;
            appearance: none;
            background: transparent;
            position: absolute;
            left: 0;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
        }

        .range-input::-webkit-slider-thumb {
            -webkit-appearance: none;
            pointer-events: auto;
            cursor: pointer;
            height: 18px;
            width: 18px;
            border-radius: 9999px;
            background: #fff;
            border: 2px solid #6366f1;
            /* indigo-500 */
        }

        .range-input::-moz-range-thumb {
            pointer-events: auto;
            cursor: pointer;
            height: 18px;
            width: 18px;
            border-radius: 9999px;
            background: #fff;
            border: 2px solid #6366f1;
        }

        .bubble::after {
            content: "";
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 100%;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 8px solid rgb(79 70 229);
            /* indigo-700 */
        }
    </style>
</head>

<body class="p-8">
    <div class="max-w-lg">
        <label class="font-semibold mb-2 block">Price</label>

        <div class="relative pt-12 pb-6">
            <!-- bubble for active thumb -->
            <output id="activeBubble"
                class="bubble hidden absolute -top-[36px] -translate-x-1/2 rounded-full bg-indigo-700 px-2 py-1 text-xs font-semibold text-white shadow">
            </output>

            <!-- base track -->
            <div class="absolute left-0 right-0 top-1/2 h-1 -translate-y-1/2 rounded-full bg-indigo-200"></div>
            <div id="progress" class="absolute top-1/2 h-1 -translate-y-1/2 rounded-full bg-indigo-500"></div>

            <!-- two ranges -->
            <input id="min" type="range" min="0" max="650" step="10" value="172" class="range-input z-20" />
            <input id="max" type="range" min="0" max="650" step="10" value="332" class="range-input z-30" />

            <!-- labels -->
            <div class="mt-6 flex justify-between text-sm text-gray-500">
                <span>$0</span>
                <span>$650</span>
            </div>
        </div>
    </div>

    <script>
        const min = document.getElementById('min');
        const max = document.getElementById('max');
        const progress = document.getElementById('progress');
        const bubble = document.getElementById('activeBubble');

        const minAttr = +min.min;
        const maxAttr = +max.max;
        const range = maxAttr - minAttr;

        function update() {
            const minVal = +min.value;
            const maxVal = +max.value;
            const minPct = ((minVal - minAttr) / range) * 100;
            const maxPct = ((maxVal - minAttr) / range) * 100;

            progress.style.left = minPct + '%';
            progress.style.right = (100 - maxPct) + '%';
        }

        function showBubble(input) {
            const val = +input.value;
            const pct = ((val - minAttr) / range) * 100;
            bubble.style.left = pct + '%';
            bubble.textContent = `$${val}`;
            bubble.classList.remove('hidden');
        }

        function hideBubble() {
            bubble.classList.add('hidden');
        }

        [min, max].forEach(input => {
            input.addEventListener('input', update);
            input.addEventListener('mousedown', () => showBubble(input));
            input.addEventListener('touchstart', () => showBubble(input));
            input.addEventListener('mousemove', () => showBubble(input));
            input.addEventListener('mouseup', hideBubble);
            input.addEventListener('touchend', hideBubble);
        });

        update(); // initial fill
    </script>
</body>

</html>